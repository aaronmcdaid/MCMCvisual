---
title: "*A simple Jupyter trick to generate a grid of plots*"
output: html_document
---

<style type="text/css">
body{ font-size: 16px; }
</style>

&nbsp;

<div style="border:1px solid black ; text-align:center">

# [Aaron McDaid](https://aaronmcdaid.github.io/)

Statistics and Python and C++, and other fun projects

`aaron.mcdaid@gmail.com`

[`@aaronmcdaid`](https://twitter.com/aaronmcdaid)
</div>

# &nbsp;

<div style="text-align:right">
***by [Aaron](https://aaronmcdaid.github.io/), 2nd January 2019***

[(code for this document)](index.Rmd)
</div>

```{r setup, echo=FALSE}
library(knitr)
knitr::opts_chunk$set(engine.path = list(python = '/usr/bin/python3.6'))
```
# &nbsp;

When searching online for how to do multiple plots in a Python Jupyter notebook, you often
get results like this (["Multiple subplots"](https://matplotlib.org/gallery/subplots_axes_and_figures/subplot.html)):

```{python, echo=F}
import matplotlib
import numpy as np
import matplotlib.pyplot as plt
```

```{python, eval=F}
xs = np.linspace(-1, 1)
plt.subplot(1,2,1)
plt.plot(xs, np.sin(xs))
plt.subplot(1,2,2)
plt.plot(xs, np.cos(xs))
plt.show()
```

```{python, echo=F, dpi=50, fig.width=6, fig.height=4, fig.align='center'}
xs = np.linspace(-1, 1)
plt.subplot(1,2,1)
plt.plot(xs, np.sin(xs))
plt.subplot(1,2,2)
plt.plot(xs, np.cos(xs))
plt.show()
```

However, I find that difficult for a number of reasons. It requires you know the number of items in advance
and it is necessary to manually keep track of the coordinates. Also, it mixes up the code for plotting
with the subplot-management code.

So instead, here is a very simple trick to allow you to specify all your plots, separated by `yield`:

```{python, eval=F}
def demo_plot_and_yield():
    xs = np.linspace(-1, 1)
    yield
    plt.plot(xs, np.sin(xs))
    yield
    plt.plot(xs, np.cos(xs))
    yield
    plt.plot(xs, np.cos(xs))
    yield
    plt.plot(xs, np.tan(xs))
    yield
    plt.plot(xs, np.cos(xs))
```

***Note: There must be a `yield` before every plot, _including the first one_.***

Then you can send that function to `multiplot_from_generator` (defined below) along
with the desired number of columns (in this case `3`) and it will generate this.

![optional caption text](figures/Screenshot.png)

```{python, eval=F}
multiplot_from_generator(demo_plot_and_yield(), 3)
```
```{python, eval=F}
def multiplot_from_generator(g, w, figsize=(15,5)):
    next(g)
    try:
        while True:
            plt.figure(figsize=figsize)
            for col in range(w):
                ax = plt.subplot(1, w, col+1)
                next(g)
    except StopIteration:
        pass

```

Thanks for making it this far! I'd love feedback, see my Twitter handle and my email address at the top of the page.

&nbsp;

&nbsp;
<div style="text-align:right">
***by [Aaron](https://aaronmcdaid.github.io/), 2nd January 2019***
</div>

<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'aaron-mcdaid'; // required: replace example with your forum shortname
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
